{%extends 'index.html'%}
{%block main%}
<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}">
<link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
<link rel="icon" href="{{url_for('static',filename='logo.png')}}" type="image/icon type">
<h4 style="border-bottom: 1px solid lightgray;">VACCINATION</h4>
<form action="{{url_for('vac.vax_find')}}" method="post" style="padding: 0;">
        <input type="Search" name="txtsearch" placeholder="Search" style="border:1px solid lightgray;background-color: transparent;padding: 5px;">
        <input type="submit" value="Find" style="padding: 5px;min-width:5%;" class="find">
</form>
<table class="table table-bordered" id="tblvax">
    <thead style="background-color: lightgray;">
    <tr style="text-align: center;background-color:lightgray !important;">
        <th>Pet Number</th>
        <th>Date of Vaccination</th>
        <th>Vaccine Used</th>
        <th>Lot No./ Batch No.</th>
        <th>Date of Next Vaccination</th>
        <th>Veterinarian Lic No. PTR</th> 
        <th>Action</th>
    </tr>
    <tr style="border-bottom: 2px solid gray;"> 
        <td><input type="text" class="form-control" value="{{code}}" id="pet"></td>
        <td><input type="date" class="form-control" id="date_vaccine"></td>
        <td><input type="text" class="form-control" id="vaccine"></td>
        <td><input type="text" class="form-control" id="lotno"></td>
        <td><input type="date" class="form-control" id="date_next_vaccine"></td>
        <td><input type="text" class="form-control" id="vet_lic_no"></td>
        <td style="text-align: center;"><button class="btn btn-primary btn-sm" id="vax_save" style="width: 60%">Save</button>
    </tr>
</thead>
    <tbody id="vax_content">
        {%block vax%}
        {%endblock%}
    </tbody>
</table>
<style>
    .form-control{border: none;}
</style>
<script>
    $('#vax_save').click(function(){
        var pet=$('#pet').val();
        var date_vaccine=$('#date_vaccine').val();
        var vaccine=$('#vaccine').val();
        var lotno=$('#lotno').val();
        var date_next_vax=$('#date_next_vaccine').val();
        var vet_lic_no=$('#vet_lic_no').val();
        if((pet!='')||(date_vaccine!='')||(vaccine!='')){
        $.ajax({
            url:"{{url_for('vac.new_vaccination')}}",
            type:'POST',
            data:{'pet':pet,
                'date_vax':date_vaccine,
                'vax':vaccine,
                'lotno':lotno,
                'date_next_vax':date_next_vax,
                'vet_lic_no':vet_lic_no
            },
            success:function(res){
                    window.location=res.html
            }
        })}else{
            alert('Something Error!!')
        }

    })
</script>
{%endblock%}